<tool id="rseqc_clipping_profile" name="Clipping Profile" version="2.4galaxy1">
    <description>
     estimates clipping profile of RNA-seq reads from BAM or SAM file
    </description>

    <macros>
        <import>rseqc_macros.xml</import>
    </macros>

    <requirements>
        <requirement type="package" version="3.0.3">R</requirement>
        <requirement type="package" version="1.7.1">numpy</requirement>
        <requirement type="package" version="2.4">rseqc</requirement>
    </requirements>

    <stdio>
        <exit_code range="1:" level="fatal" description="An error occured during execution, see stderr and stdout for more information" />
        <regex match="[Ee]rror" source="both" description="An error occured during execution, see stderr and stdout for more information" />
    </stdio>

    <version_command><![CDATA[clipping_profile.py --version]]></version_command>

    <command><![CDATA[
        clipping_profile.py -i $input -o output
        ]]>
    </command>

    <inputs>
        <param name="input" type="data" label="Input .bam/.sam File" format="bam,sam" />
    </inputs>

    <outputs>
        <data format="pdf" name="outputpdf" from_work_dir="output.clipping_profile.pdf" />
        <data format="xls" name="outputxls" from_work_dir="output.clipping_profile.xls" />
        <data format="txt" name="outputr" from_work_dir="output.clipping_profile.r" />
    </outputs>

    <tests>
        <test>
            <param name="input" value="pairend_strandspecific_51mer_hg19_chr1_1-100000.bam"/>
            <output name="outputpdf" file="output.clipping_profile.pdf"/>
            <output name="outputxls" file="output.clipping_profile.xls"/>
            <output name="outputr" file="output.clipping_profile.r"/>
        </test>
    </tests>

    <help><![CDATA[
clipping_profile.py
+++++++++++++++++++

This program is used to estimate clipping profile of RNA-seq reads from BAM or SAM file.
Note that to use this funciton, CIGAR strings within SAM/BAM file should have 'S' operation
(This means your reads aligner should support clipped mapping).

Inputs
++++++++++++++

Input BAM/SAM file
	Alignment file in BAM/SAM format.


Sample Output
++++++++++++++

.. image:: http://rseqc.sourceforge.net/_images/clipping_good.png
   :height: 600 px
   :width: 600 px
   :scale: 80 %

-----

]]>
        <expand macro="about" />
    </help>

    <expand macro="citations" />

</tool>
